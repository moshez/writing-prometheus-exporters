\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{textcomp}
\usepackage{fancyvrb}

\title{Writing Prometheus Exporters}
\author{Moshe Zadka -- https://cobordism.com}
\date{2020}

\begin{document}
\begin{titlepage}
\maketitle
\end{titlepage}

\section{Welcome}

\frame{\titlepage}

\begin{frame}
\frametitle{Acknowledgement of Country}

San Francisco Bay Area Peninsula

Ancestral home of the Ramaytush Ohlone

\end{frame}

\section{Introduction to Prometheus}

\begin{frame}
\frametitle{Prometheus}

\begin{itemize}
\item Metrics collection and aggregation
\item Pull-based
\item Time-series-based
\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Exporter}

\begin{itemize}
\item Facade
\item Not magic
\end{itemize}

\end{frame}

\begin{frame}
\frametitle{Configuration}

\begin{lstlisting}
scrape_configs:
  - job_name: 'my-thing'
    static_configs:
      - targets: ['hostname.internal.example.com:9090']
\end{lstlisting}

\end{frame}

\begin{frame}
\frametitle{Gauge}

Measured instanenous value\pause

memory usage

\end{frame}

\begin{frame}
\frametitle{Historgram}

Samples\pause

request latency

\end{frame}

\begin{frame}
\frametitle{Counter}

Ticks up until reset\pause

total requests

\end{frame}

\section{Basic Example}

\begin{frame}
\frametitle{Pyramid Service: Prometheus}
\lstinputlisting[language=Python, firstline=7, lastline=11]{minimal.py}
\end{frame}

\begin{frame}
\frametitle{Pyramid Service: View}
\lstinputlisting[language=Python, firstline=13, lastline=17]{minimal.py}
\end{frame}

\begin{frame}
\frametitle{Pyramid Service: Configuration}
\lstinputlisting[language=Python, firstline=19, lastline=22]{minimal.py}
\end{frame}

\begin{frame}
\frametitle{Output}
\begin{lstlisting}
# HELP level The level
# TYPE level gauge
level 0.6879434220238727
\end{lstlisting}
\end{frame}

\begin{frame}
\frametitle{Setting a Good Example}
\end{frame}

\begin{frame}
\frametitle{Fake Service}
\end{frame}

\begin{frame}
\frametitle{Getting Some Statistics}
\end{frame}

\begin{frame}
\frametitle{Putting it All Together}
\end{frame}

\section{Side-car Counters}

\begin{frame}
\frametitle{What is a Counter}
\\end{frame}

\begin{frame}
\frametitle{Counters in Response}
\\end{frame}

\begin{frame}
\frametitle{Creation Time}
\\end{frame}

\section{Complete Example}

\begin{frame}
\frametitle{Gauge}
\end{frame}

\begin{frame}
\frametitle{Histogram}
\end{frame}

\begin{frame}
\frametitle{Counter}
\end{frame}

\begin{frame}
\frametitle{Service Configuration}
\end{frame}

\begin{frame}
\frametitle{Prometheus Configuration}
\end{frame}

\begin{frame}
\frametitle{How It Looks}
\end{frame}

\begin{frame}
\frametitle{Final Thoughts}
\end{frame}

\end{document}
